/**
 * Tracks the delivery status of a message. This Class is for internal use in Message._readBy & Message._acceptedBy only.
 * @private
 * @category Conversation
 */
class MessageDeliveryStatus {
    constructor(messageNotification, fromSerialized = false) {

        if (fromSerialized) {
            // the object already has the same flat structure, just assign it
            Object.assign(this, messageNotification);
        }

        // create from raw MS event and flatten it
        else {
            this.participantRole = messageNotification.originatorMetadata.role; // participant role of the user at the time they sent the status
            // can also store this.participant with the Participant object
            this.deliveryStatus = messageNotification.event.status;
            this.timestamp = messageNotification.serverTimestamp;
            this.statusSequence = messageNotification.sequence;
        }
    }
}

module.exports = MessageDeliveryStatus;
