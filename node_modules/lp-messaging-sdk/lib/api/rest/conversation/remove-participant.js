const {send} = require("../restRequestHelper");
const HttpMethod = require("../http-method");
const getSingleParticipant = require('./get-single-participant');

async function removeParticipant({accountId, token, agentId, conversationId, dialogId}) {

    // TODO test with UMS 4.6
    const path = `/v1/conversations/${conversationId}/dialogs/${dialogId}/participants/${agentId}`;

    // obtain the ParticipantEtag
    const get = await getSingleParticipant({accountId, token, agentId, conversationId, dialogId});

    const header = {};
    header['If-Match'] = get.headers.etag;

    return await send({accountId, token, path, header, method: HttpMethod.DELETE});
}

module.exports = removeParticipant;
