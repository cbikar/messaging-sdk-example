const {send} = require("../restRequestHelper");
const HttpMethod = require('../http-method');
const getConversationById = require("./get-conversation-by-id");

async function updateConversationStage({accountId, token, conversationId, stage}) {

    const path = `/v1/conversations/${conversationId}`;

    // obtain the ConversationEtag
    const get = await getConversationById({accountId, token, conversationId});

    const header = {};
    header['If-Match'] = get.headers.etag;

    const data = {stage};

    return await send({accountId, token, path, header, data, method: HttpMethod.PATCH});
}

module.exports = updateConversationStage;
