const {publishEvent, PublishEventType, v2Context, v3Context} = require('./publish-event');

// https://globaldocs.liveperson.com/display/UMSgroup/Subscribe+MS+in+version+3
// https://confluence.liveperson.com/display/CS/Accept+Status+Event
// NOTE - Dialog that is closed can still get accept status messages

/**
 * @private
 * @param conversationId
 * @param dialogId
 * @param {DeliveryStatus} status
 * @param {Array} sequenceList
 * @returns {WsApiRequest}
 */
function acceptStatusEvent(conversationId, dialogId, status, sequenceList) {
    return publishEvent.call(this, conversationId, dialogId, {
        type: PublishEventType.ACCEPT_STATUS_EVENT,
        sequenceList: sequenceList,
        status: status
    });
}

module.exports = {
    v2: acceptStatusEvent.bind(v2Context),
    v3: acceptStatusEvent.bind(v3Context)
};
