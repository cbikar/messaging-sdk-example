const requestTypeV2 = ".ams.ms.QueryMessages";

/**
 * just gets existing messages, does not subscribe, v2 only
 * @private
 * @param dialogId
 * @param maxQuantity
 * @param sequenceMin
 * @param sequenceMax
 * @returns {WsApiRequest}
 */
function queryMessages({dialogId, maxQuantity = null, sequenceMin = null, sequenceMax = null}) {
    const body = {
        dialogId: dialogId
    };

    if (maxQuantity !== null) {
        body.maxQuantity = maxQuantity;
    }

    if (sequenceMin !== null) {
        body.newerThanSequence = sequenceMin;
    }

    if (sequenceMax !== null) {
        body.olderThanSequence = sequenceMax;
    }

    return {
        type: this.type,
        body: body
    }
}

module.exports = {
    v2: queryMessages.bind({type: requestTypeV2})
};
