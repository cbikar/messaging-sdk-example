
const requestTypeV3 = "InitConnection";
const authHeaderType = ".ams.headers.ConsumerAuthentication";
const clientPropertiesType=  ".ams.headers.ClientProperties";

/**
 * @private
 * @returns {WsApiRequest}
 */
function initConnection(jwt, clientProperties = null) {

    const headers = [{type: authHeaderType, jwt}];

    // if client properties are passed in, include them as a second header
    if (clientProperties !== null) {
        // add the type
        const clientPropHeader = Object.assign({type: clientPropertiesType}, clientProperties);
        headers.push(clientPropHeader)
    }

    return {
        type: this.type,
        headers: headers,
        body: {}
    };
}

module.exports = {
    // v2: there is no v2 for this function
    v3: initConnection.bind({type: requestTypeV3})
};
